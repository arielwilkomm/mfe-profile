<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de Usuários</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    body {
      background-color: #f3f4f6;
      padding: 20px;
    }
    .container {
      max-width: 960px;
      margin: auto;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 16px;
    }
    button {
      cursor: pointer;
    }
    .button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      color: #fff;
    }
    .button.create {
      background-color: #2563eb;
    }
    .button.edit {
      background-color: #d97706;
    }
    .button.delete {
      background-color: #dc2626;
    }
    .button.cancel {
      background-color: #6b7280;
    }
    .button.save {
      background-color: #16a34a;
    }
    table {
      width: 100%;
      background-color: #fff;
      border-collapse: collapse;
      margin-top: 16px;
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      text-align: left;
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
    thead {
      background-color: #e5e7eb;
    }
    .modal-bg {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal {
      background-color: white;
      padding: 24px;
      border-radius: 8px;
      width: 100%;
      max-width: 400px;
    }
    .form-group {
      margin-bottom: 12px;
    }
    .form-group input {
      width: 100%;
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
    }
    @media (max-width: 600px) {
      table thead {
        display: none;
      }
      table, tbody, tr, td {
        display: block;
        width: 100%;
      }
      tr {
        margin-bottom: 16px;
        background-color: white;
        border-radius: 8px;
        padding: 12px;
      }
      td {
        text-align: right;
        padding-left: 50%;
        position: relative;
      }
      td::before {
        content: attr(data-label);
        position: absolute;
        left: 12px;
        top: 12px;
        font-weight: bold;
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h1>Usuários</h1>
      <button onclick="abrirModal()" class="button create">Criar Usuário</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>CPF</th>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="tabelaUsuarios"></tbody>
    </table>
  </div>

  <div id="modal" class="modal-bg">
    <div class="modal">
      <h2 style="margin-bottom: 16px; font-size: 18px;">Cadastrar Usuário</h2>
      <form id="formUsuario">
        <input type="hidden" id="indiceEdicao" />
        <div class="form-group">
          <input id="cpf" type="text" placeholder="CPF" required />
        </div>
        <div class="form-group">
          <input id="nome" type="text" placeholder="Nome" required />
        </div>
        <div class="form-group">
          <input id="email" type="email" placeholder="Email" required />
        </div>
        <div class="form-group">
          <input id="telefone" type="text" placeholder="Telefone" required />
        </div>
        <div style="display: flex; justify-content: flex-end; gap: 8px;">
          <button type="button" onclick="fecharModal()" class="button cancel">Cancelar</button>
          <button type="submit" class="button save">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    let usuarios = []

    function abrirModal(indice = null) {
      document.getElementById('modal').style.display = 'flex'
      if (indice !== null) {
        const u = usuarios[indice]
        document.getElementById('cpf').value = u.cpf
        document.getElementById('nome').value = u.nome
        document.getElementById('email').value = u.email
        document.getElementById('telefone').value = u.telefone
        document.getElementById('indiceEdicao').value = indice
      } else {
        document.getElementById('formUsuario').reset()
        document.getElementById('indiceEdicao').value = ''
      }
    }

    function fecharModal() {
      document.getElementById('modal').style.display = 'none'
    }

    function atualizarTabela() {
      const corpo = document.getElementById('tabelaUsuarios')
      corpo.innerHTML = ''
      usuarios.forEach((u, i) => {
        corpo.innerHTML += `
          <tr>
            <td data-label="CPF">${u.cpf}</td>
            <td data-label="Nome">${u.nome}</td>
            <td data-label="Email">${u.email}</td>
            <td data-label="Telefone">${u.telefone}</td>
            <td data-label="Ações">
              <button onclick="abrirModal(${i})" class="button edit">Editar</button>
              <button onclick="excluirUsuario(${i})" class="button delete">Excluir</button>
            </td>
          </tr>
        `
      })
    }

    function excluirUsuario(i) {
      if (confirm('Deseja realmente excluir este usuário?')) {
        usuarios.splice(i, 1)
        atualizarTabela()
      }
    }

    document.getElementById('formUsuario').addEventListener('submit', function (e) {
      e.preventDefault()
      const cpf = document.getElementById('cpf').value
      const nome = document.getElementById('nome').value
      const email = document.getElementById('email').value
      const telefone = document.getElementById('telefone').value
      const indice = document.getElementById('indiceEdicao').value

      const usuario = { cpf, nome, email, telefone }

      if (indice === '') {
        usuarios.push(usuario)
      } else {
        usuarios[indice] = usuario
      }

      fecharModal()
      atualizarTabela()
    })
  </script>
</body>
</html>